<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>SQL for Data Science</title>
  </head>
  <body>
    
    <nav class="navbar navbar-dark bg-dark">
      <span class="navbar-brand mb-0 h1">SQL for Data Science</span>
    </nav>
    <h3>What is SQL? </h3>
    <p>Structured Query Language is a standard computer language for relational database management and data manipulation. It is used to query, insert, update and modify data. Statments
        are made up of descriptive words (hence it is extrememly easy to learn). On the flipside, SQL is a non procedural language , i.e. it cannot be used to write complete applications.
        
        SQL is used by Data Scientists to primarily read/retrieve data, write data and update data. 
    </p>

    <h3>Data Models: </h3>
    <p>
        <ul>
            <li>To understand the business process or subject matter the data is modeled after.</li>
            <li>To know the business rules</li>
            <li>Understand how your data is organized and structured in the table.</li>
        </ul>

        Data Models are made up of database and tables. Database is a container to store organized data. Tables are a structured list of data. <br>
        Data models are used to 
        <ul>
            <li>Organize and structure information into multiple related tables.</li>
            <li>can represent the business process or show relationships between business processes</li>
            <li>should closely represent real world.</li>
        </ul>
        <h5>Types of Data Models: </h5>
        <ol>
            <li>Hierarchical Model</li>
            <li>Network Model</li>
            <li>Relational Model</li>
            <li>Entity relationship Model</li>
            <li>Semantic Model</li>
            <li>Object Oriented Model</li>
            <li>Extended Relational Model</li>
            <li>NoSQL Model</li>
        </ol>

    </p>

    <h3>Some Terminologies: </h3>
    <p>
        <b>Relational Model: </b> The relational model (RM) for database management is an approach to managing data using a structure and language consistent with first-order predicate 
        logic, first described in 1969 by English computer scientist Edgar F. Codd, where all data is represented in terms of tuples, grouped into relations. A database organized in 
        terms of the relational model is a relational database.

        The purpose of the relational model is to provide a declarative method for specifying data and queries: users directly state what information the database contains and what
         information they want from it, and let the database management system software take care of describing data structures for storing the data and retrieval procedures for 
         answering queries.<br>
        <b>Transactional Model: </b> Transactional model, generally speaking, refers to a model in which interactions in two directions are considered together, for example from one 
        person to another and back, or from one subsystem to another and back. <br>
        <b>Entity: </b> Person , place or event. It must be distinguishable , unique and distinct.
        <br>
        <b>Attribute: </b>A charecteristic of an Entity. <br>
        <b>Relationship: </b> Describes association among entities. Can be of 3 types: one to many , many to many and one to one. <br>
        <b>ER Diagrams: </b> ER model is composed of entity tpes and specifies relationships that can exist between instances of those entity types. <br>
        <div class="container"><img src="https://i.imgur.com/QsUxp3L.png" alt="#" width="1000" height="500"> </div>
        <b>Primary Key: </b>A column or set of columns whose values uniquely identify every row in a table.
        <br>
        <b>Foreign Key: </b>One or more columns that can be used together to identify a single row in another table. 

        
    </p>

    <h3>Codes: </h3>
    <div class="container">
    <h5>Retrieving Data with Select Statments</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        SELECT prod_name, prod_id, prod_price
        FROM Products;
        </code>
        </pre>
    </div>
    <h5>Requesting All the Columns:</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        SELECT *
        FROM Products
        </code>
        </pre>
    </div>

    <h5>Limit Data</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        SELECT Columns you wish to see
        FROM Specific Table
        LIMIT Number of Records
        </code>
        </pre>
    </div>

    <h5>Create Tables:</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        CREATE TABLE Shoes
        (
            Id char(10) Primary Key,
            Type char(250) Not NULL,
            Price Decimal(8,2) Not NULL
        );
        </code>
        </pre>
    </div>
    <h5>Inserting Values:</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        INSERT INTO Shoes
        (
            Id,
            Brand,
            Price

        )
        VALUES("E362","GUCCI",36.56)
        </code>
        </pre>
    </div>
    <h5>Creating Temporary Table:</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        CREATE TEMPORARY TABLE Sandals AS
        (
            SELECT *
            FROM Shoes
            WHERE Shoe_type = "Sandals"
        )
        </code>
        </pre>
    </div>
    


</div>
<h3>Filtering, Sorting and Calculating Data: </h3>
<p>
    Why do we use filtering? 
    <ul>
        <li>to be specific about the data we want to retrieve</li>
        <li>reduce the number of records you want to retrieve</li>
        <li>Increase query performance</li>
        <li>Reduce the strain on the client application</li>
        <li>Governance limitations</li>
    </ul>

    <div class="container">
        <h5>WHERE Clause</h5>
    <div class="bg-dark">
        <pre>
        <code class = "text-info">
        SELECT Column_name
        FROM Table_name
        WHERE Column_name operation;
        </code>
        </pre>
    </div>
    <table class="ui basic table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Description</th>
            
          </tr>
        </thead>
        <tbody>
        <tr>
            <td>=</td>
            <td>Equal</td>
        </tr>
         <tr>
             <td> <> </td>
             <td>Not Equal</td>
         </tr> 
          <tr>
              <td>></td>
              <td>Greater than</td>
          </tr>
          <tr>
              <td>< </td>
              <td>
                  Less Than
              </td>
          </tr>
          <tr>
              <td>>=</td>
              <td>Greater than equals</td>
          </tr>
          <tr>
              <td><=</td>
              <td>Less Than Equals</td>
          </tr>
          <tr>
              <td>BETWEEN</td>
              <td>Between an inclusive range</td>
          </tr>
          <tr>
              <td>IS NULL</td>
              <td>Is a null value?</td>
          </tr>
          <tr>
              <td>IN</td>
              <td>Specifies a range of comditions, comma delimited list of values</td>
          </tr>
          <tr>
              <td>OR</td>
              <td>Checks for or condition</td>
          </tr>
          <tr>
              <td>AND</td>
              <td>Checks for and condition</td>
          </tr>
          <tr>
              <td>NOT</td>
              <td>Checks for everything except the condition</td>
          </tr>
          
        </tbody>
      </table>

    </div>
</p>
<h3>WILD Cards</h3>
<p>
    <ul>
        <li>Special character used to match parts of a value</li>
        <li>Search pattern made from literal text, wildcard character or a combination</li>
        <li>Uses LIKE as an operator</li>
        <li>Can only be used with Strings</li>
        <li>Cannot be used for non text datatype</li>
        <li>"%Pizza": Grabs anything ending with pizza</li>
        <li>"Pizza%": Grabs anything beginning with pizza </li>
        <li>"%Pizza%": Grabs anything with pizza in between</li>
        <li>Statement: WHERE size LIKE "%Pizza"</li>
    </ul>

</p>
<h3>Order BY: </h3>
<p>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT Column_name
            FROM Table_name
            WHERE Column_name operation
            ORDER BY Characeteristic;
            </code>
            </pre>
        </div>
    </div>
    <ul>
        <li>Takes the name of one or more columns</li>
        <li>Add a comma after each additional column name</li>
        <li>Can sort by a column not retrieved</li>
        <li>Must always be the last clause in a select statement</li>
        <li>DESC: for descending order & ASC: for ascending order</li>
        <li>Some of the aggregate function: AVG(), COUNT(),MIN(),MAX(),SUM()</li>
        <li>COUNT(*): Counts all the rows in a table containing values or null values.</li>
        <li>COUNT(column): Counts all the rows in a specific column ignoring NULL Values.</li>
    </ul>
</p>
<h3>GROUP BY:</h3>
<p>
    <ul>
        <li>Can group by multiple column</li>
        <li>Every column in your SELECT statment must be present in a group by clause, except for aggregated calculations</li>
        <li>NULLS will be grouped together if your group by columns contains NULLS</li>
        <li>WHERE statement must come before grouping and HAVING must come after grouping</li>
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT customerID, Count(*) AS orders
            FROM Orders
            GROUP BY CustomerId
            Having count(*) >=2
            </code>
            </pre>
        </div>
    </div>
</p>

<h3>Subqueries: </h3>
<p>
    <ul>
        <li>Subqueries are embedded into other queries</li>
        <li>Subqueries merge data from multiple sources together</li>
        <li>There is no limit to the number of subqueries you can have</li>
        <li>Performance slows when you nest too deeply</li>
        <li>Subquery selects can only retrieve a single column.</li>
        
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT customerID, Count(*) AS orders
            FROM Orders
            WHERE customerID IN (SELECT customerID 
            FROM Orders
            WHERE Freight > 100)
            </code>
            </pre>
        </div>
    </div>
</p>

<h3>Joins: </h3>
<p>
    <ul>
        <li>Associate correct records from each table on the fly.</li>
        <li>Allows data retrieval from multiple tables in one query</li>
        <li>Joins are not physical they persist for the duration of the query execution.</li>

    </ul>
    <h5>Cartesian Joins:</h5>
    <ul>
        <li>Each rows from the first table joins with all the rows of another table.</li>
        <li>It is not frequently used and extrememly computationally taxing</li>
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT Product_name, unit_price, company_name
            FROM Suppliers Cross Join Products
            </code>
            </pre>
        </div>
    </div>

    <h5>Inner Joins: </h5>
    <ul>
        <li>The inner join keyword selects records that have matching values in both table.</li>
        <li>Joining more tables together affects overall database performances</li>
        <li>You can join multiple table together.</li>

    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT Suppliers.CompanyName, Product_name, unit_price
            FROM Suppliers INNER JOIN Products ON Suppliers.supplierid = Products.supplierid
            </code>
            </pre>
        </div>
    </div>

    <h5>Self Joins: </h5>
    <ul>
        <li>Take the table and treat it like two separate tables.</li>
        <li>Join the original table to itself</li>
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT A.CustomerName AS Customer1,
            B.CustomerName AS Customer2,
            A.City
            FROM Customers A, Customers B
            WHERE A.Customerid = B.Customerid 
            AND A.City = B.City
            ORDER BY A.City
            </code>
            </pre>
        </div>
    </div>

    <h5>Left Joins: </h5>
    <ul><li>Returns all the records from the left table and the matched record from the right table</li></ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT C.Customerid, O.orderid
            From Customers C
            Left JOINH Orders O on C.CustomerId = O.CustomerID
            ORDER BY C.CustomerName
            </code>
            </pre>
        </div>
    </div>

    <h5>Unions: </h5>
    <ul>
        <li>The union operator is used to combine the result set of two or more select statement</li>
        <li>Each select statement within union must have the same number of columns</li>
        <li>Columns must have similar data types</li>
        <li>The columns in each statement must be in some order</li>
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT col1,col2,.....
            FROM table1
            UNION
            SELECT col1,col2,.....
            FROM table2
            </code>
            </pre>
        </div>
    </div>

    <h5>Aliases</h5>
    <ul>
        <li>SQL aliases give a table or a column a temporary name</li>
        <li>make column names more readable</li>
        <li>An alias only exists for the duration of the query.</li>
    </ul>
</p>

<h3>Modifying Data: </h3>
<p>
    <h5>Text Strings: </h5>
    <ul>
        <li>Concatenate: SELECT CompanyName||'('||ContactName||')'</li>
        <li>Trim: TRIM("   YOu the best  ") AS tString</li>
        <li>Substring: SUBSTR(String Name, String pos, number of character to be returned)</li>
        <li>Upper and Lower: UPPER(Column_name), LOWER(Column_name)</li>
    </ul>
    <h5>Date Strings:</h5>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            SELECT Birthdate,
            STRFTIME("%Y", Birthdate) AS YEAR,
            STRFTIME("%M",Birthdate) AS MONTH,
            STRFTIME("%D",Birthdate) AS DAY

            FROM Employees
            </code>
            </pre>
        </div>
    </div>

    <h5>Case Statement: </h5>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            CASE City
            WHEN "KOLKATA" THEN 1
            ELSE 0
            END CityCat
            </code>
            </pre>
        </div>
    </div>

    <h5>Views:</h5>
    <ul>
        <li>A stored query</li>
        <li>can add or remove columns without changing the schema</li>
        <li>Use it to encapsulate queries</li>
        <li>The view will be removed after database connection has ended.</li>
        
    </ul>
    <div class="container">
        <div class="bg-dark">
            <pre>
            <code class = "text-info">
            CREATE VIEW my_view
            AS
            SELECT.......
            </code>
            </pre>
        </div>
    </div>
</p>







    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>